<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Pajak Reklame</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');
        body { 
            font-family: 'Poppins', sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .tab-button {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .tab-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        .tab-button:hover::before {
            left: 100%;
        }
        .tab-active {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        .input-focus {
            transition: all 0.3s ease;
        }
        .input-focus:focus {
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(79, 70, 229, 0.2);
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <div class="text-center mb-10">
            <div class="bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white p-8 rounded-2xl shadow-2xl mb-8 card-hover">
                <h1 class="text-5xl font-bold mb-3 bg-gradient-to-r from-yellow-300 to-orange-300 bg-clip-text text-transparent">🏢 Kalkulator Pajak Reklame</h1>
                <h2 class="text-2xl font-semibold mb-2 text-blue-100">BADAN PENDAPATAN DAERAH</h2>
                <h3 class="text-xl font-medium mb-2 text-blue-200">KABUPATEN KAMPAR</h3>
                <p class="text-blue-100 text-sm opacity-90">Jalan Prof. M.Yamin, SH Nomor 83 Bangkinang, Riau 28412</p>
            </div>
            <p class="text-white text-lg font-medium opacity-90">Hitung pajak reklame Anda dengan mudah dan akurat sesuai Peraturan Daerah Kabupaten Kampar</p>
        </div>

        <!-- Tab Navigation -->
        <div class="flex justify-center mb-8">
            <div class="bg-white/20 backdrop-blur-lg rounded-2xl p-2 shadow-xl">
                <button id="tabPermanen" onclick="switchTab('permanen')" class="tab-button px-8 py-4 rounded-xl font-semibold text-white mr-2 tab-active">
                    🏢 Reklame Permanen
                </button>
                <button id="tabInsidentil" onclick="switchTab('insidentil')" class="tab-button px-8 py-4 rounded-xl font-semibold text-white/70 hover:text-white hover:bg-white/10">
                    📅 Reklame Insidentil
                </button>
            </div>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
            <!-- Input Form -->
            <div class="bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl p-8 card-hover">
                <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">📝 Data Reklame</h2>

                <!-- Tab Content Permanen -->
                <div id="contentPermanen" class="tab-content">
                    <!-- Jenis Reklame Permanen -->
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-gray-700 mb-3">🏢 Jenis Reklame Permanen</label>
                        <select id="jenisReklame" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 input-focus bg-gradient-to-r from-gray-50 to-white">
                            <option value="">Pilih Jenis Reklame</option>
                            <option value="megatron">Megatron</option>
                            <option value="billboard-tiang-penerangan">Billboard/Papan - Tiang dengan Penerangan</option>
                            <option value="billboard-tiang-tanpa">Billboard/Papan - Tiang Tanpa Penerangan</option>
                            <option value="billboard-menempel-penerangan">Billboard/Papan - Menempel dengan Penerangan</option>
                            <option value="billboard-menempel-tanpa">Billboard/Papan - Menempel Tanpa Penerangan</option>
                        </select>
                    </div>

                    <!-- Dimensi -->
                    <div class="grid grid-cols-2 gap-6 mb-6">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">📏 Panjang (m)</label>
                            <input type="number" id="panjang" step="0.1" min="0" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 input-focus bg-gradient-to-r from-gray-50 to-white" placeholder="0">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">📐 Lebar (m)</label>
                            <input type="number" id="lebar" step="0.1" min="0" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 input-focus bg-gradient-to-r from-gray-50 to-white" placeholder="0">
                        </div>
                    </div>

                    <!-- Ketinggian -->
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-gray-700 mb-3">📊 Ketinggian (m)</label>
                        <input type="number" id="ketinggian" step="0.1" min="0" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 input-focus bg-gradient-to-r from-gray-50 to-white" placeholder="0">
                    </div>

                    <!-- Sudut Pandang -->
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-gray-700 mb-3">👁️ Sudut Pandang</label>
                        <select id="sudutPandang" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 input-focus bg-gradient-to-r from-gray-50 to-white">
                            <option value="">Pilih Sudut Pandang</option>
                            <option value="lebih-4">Lebih dari 4 Arah</option>
                            <option value="4">4 Arah</option>
                            <option value="3">3 Arah</option>
                            <option value="2">2 Arah</option>
                            <option value="1">1 Arah</option>
                        </select>
                    </div>

                    <!-- Lokasi -->
                    <div class="mb-8">
                        <label class="block text-sm font-semibold text-gray-700 mb-3">📍 Kelas Lokasi</label>
                        <select id="kelasLokasiPermanen" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 input-focus bg-gradient-to-r from-gray-50 to-white">
                            <option value="">Pilih Kelas Lokasi</option>
                            <option value="1">Kelas 1</option>
                            <option value="2">Kelas 2</option>
                        </select>
                    </div>
                </div>

                <!-- Tab Content Insidentil -->
                <div id="contentInsidentil" class="tab-content" style="display: none;">
                    <!-- Jenis Reklame Insidentil -->
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-gray-700 mb-3">📅 Jenis Reklame Insidentil</label>
                        <select id="jenisReklameInsidentil" onchange="toggleInsidentilForm()" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-purple-200 focus:border-purple-500 input-focus bg-gradient-to-r from-gray-50 to-white">
                            <option value="">Pilih Jenis Reklame</option>
                            <option value="baliho">Baliho/Kain/Spanduk/Umbul-Umbul/Banner/Tenda/Flag Chan/Cover</option>
                            <option value="selebaran">Selebaran/Brosur/Leaflet</option>
                        </select>
                    </div>

                    <!-- Dimensi untuk Baliho -->
                    <div id="dimensiBaliho" class="grid grid-cols-2 gap-6 mb-6" style="display: none;">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">📏 Panjang (m)</label>
                            <input type="number" id="panjangInsidentil" step="0.1" min="0" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-purple-200 focus:border-purple-500 input-focus bg-gradient-to-r from-gray-50 to-white" placeholder="0">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">📐 Lebar (m)</label>
                            <input type="number" id="lebarInsidentil" step="0.1" min="0" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-purple-200 focus:border-purple-500 input-focus bg-gradient-to-r from-gray-50 to-white" placeholder="0">
                        </div>
                    </div>

                    <!-- Jumlah untuk Selebaran -->
                    <div id="jumlahSelebaran" class="mb-6" style="display: none;">
                        <label class="block text-sm font-semibold text-gray-700 mb-3">📄 Jumlah Lembar</label>
                        <input type="number" id="jumlahLembar" min="1" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-purple-200 focus:border-purple-500 input-focus bg-gradient-to-r from-gray-50 to-white" placeholder="0">
                    </div>

                    <!-- Jumlah Reklame -->
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-gray-700 mb-3">🔢 Jumlah Reklame</label>
                        <input type="number" id="jumlahReklame" min="1" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-purple-200 focus:border-purple-500 input-focus bg-gradient-to-r from-gray-50 to-white" placeholder="1">
                    </div>

                    <!-- Lama Pemasangan -->
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-gray-700 mb-3">⏰ Lama Pemasangan (Hari)</label>
                        <input type="number" id="lamaPemasangan" min="1" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-purple-200 focus:border-purple-500 input-focus bg-gradient-to-r from-gray-50 to-white" placeholder="1">
                    </div>

                    <!-- Lokasi -->
                    <div class="mb-8">
                        <label class="block text-sm font-semibold text-gray-700 mb-3">📍 Kelas Lokasi</label>
                        <select id="kelasLokasiInsidentil" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-purple-200 focus:border-purple-500 input-focus bg-gradient-to-r from-gray-50 to-white">
                            <option value="">Pilih Kelas Lokasi</option>
                            <option value="1">Kelas 1</option>
                            <option value="2">Kelas 2</option>
                        </select>
                    </div>
                </div>

                <!-- Button -->
                <button onclick="hitungPajak()" class="w-full bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white font-bold py-4 px-8 rounded-xl hover:from-indigo-700 hover:via-purple-700 hover:to-pink-700 transition-all duration-300 shadow-xl hover:shadow-2xl transform hover:scale-105">
                    <span class="text-lg">🧮 Hitung Pajak Reklame</span>
                </button>
            </div>

            <!-- Results -->
            <div class="bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl p-8 card-hover">
                <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent">📊 Hasil Perhitungan</h2>
                
                <div id="hasilPerhitungan" class="space-y-4">
                    <div class="text-center text-gray-500 py-12">
                        <div class="text-8xl mb-6 animate-pulse">📋</div>
                        <p class="text-lg font-medium">Isi data reklame untuk melihat hasil perhitungan</p>
                        <p class="text-sm text-gray-400 mt-2">Pilih tab dan lengkapi form di sebelah kiri</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Info -->
        <div class="mt-10 bg-white/20 backdrop-blur-lg border border-white/30 rounded-2xl p-8 card-hover">
            <h3 class="text-2xl font-bold text-white mb-6 text-center">ℹ️ Informasi Penting</h3>
            <div class="space-y-4 text-white">
                <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6">
                    <p class="text-lg font-semibold mb-2">📋 Kalkulator Resmi BAPENDA Kabupaten Kampar</p>
                    <p class="text-white/90">Kalkulator ini menggunakan ketentuan perhitungan pajak reklame sesuai dengan Peraturan Daerah Kabupaten Kampar yang berlaku.</p>
                </div>
                <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6">
                    <p class="text-lg font-semibold mb-2 text-yellow-300">⚠️ Disclaimer</p>
                    <p class="text-white/90">Hasil perhitungan adalah estimasi dan dapat berbeda dengan perhitungan resmi. Untuk kepastian nilai pajak yang harus dibayar, silakan konsultasikan dengan petugas BAPENDA Kabupaten Kampar.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentTab = 'permanen';

        function switchTab(tab) {
            currentTab = tab;
            
            // Update tab buttons
            const tabPermanen = document.getElementById('tabPermanen');
            const tabInsidentil = document.getElementById('tabInsidentil');
            const contentPermanen = document.getElementById('contentPermanen');
            const contentInsidentil = document.getElementById('contentInsidentil');

            if (tab === 'permanen') {
                tabPermanen.className = 'tab-button px-8 py-4 rounded-xl font-semibold text-white mr-2 tab-active';
                tabInsidentil.className = 'tab-button px-8 py-4 rounded-xl font-semibold text-white/70 hover:text-white hover:bg-white/10';
                contentPermanen.style.display = 'block';
                contentInsidentil.style.display = 'none';
            } else {
                tabInsidentil.className = 'tab-button px-8 py-4 rounded-xl font-semibold text-white mr-2 tab-active';
                tabPermanen.className = 'tab-button px-8 py-4 rounded-xl font-semibold text-white/70 hover:text-white hover:bg-white/10';
                contentInsidentil.style.display = 'block';
                contentPermanen.style.display = 'none';
            }

            // Reset hasil
            document.getElementById('hasilPerhitungan').innerHTML = `
                <div class="text-center text-gray-500 py-12">
                    <div class="text-8xl mb-6 animate-pulse">📋</div>
                    <p class="text-lg font-medium">Isi data reklame untuk melihat hasil perhitungan</p>
                    <p class="text-sm text-gray-400 mt-2">Pilih tab dan lengkapi form di sebelah kiri</p>
                </div>
            `;
        }

        function toggleInsidentilForm() {
            const jenis = document.getElementById('jenisReklameInsidentil').value;
            const dimensiBaliho = document.getElementById('dimensiBaliho');
            const jumlahSelebaran = document.getElementById('jumlahSelebaran');

            dimensiBaliho.style.display = 'none';
            jumlahSelebaran.style.display = 'none';

            if (jenis === 'baliho') {
                dimensiBaliho.style.display = 'block';
            } else if (jenis === 'selebaran') {
                jumlahSelebaran.style.display = 'block';
            }
        }

        function hitungPajak() {
            if (currentTab === 'permanen') {
                hitungPajakPermanen();
            } else if (currentTab === 'insidentil') {
                hitungPajakInsidentil();
            }
        }

        function hitungPajakPermanen() {
            // Ambil nilai input
            const jenisReklame = document.getElementById('jenisReklame').value;
            const panjang = parseFloat(document.getElementById('panjang').value) || 0;
            const lebar = parseFloat(document.getElementById('lebar').value) || 0;
            const ketinggian = parseFloat(document.getElementById('ketinggian').value) || 0;
            const kelasLokasi = document.getElementById('kelasLokasiPermanen').value;
            const sudutPandang = document.getElementById('sudutPandang').value;

            // Validasi input
            if (!jenisReklame || panjang <= 0 || lebar <= 0 || ketinggian <= 0 || !kelasLokasi || !sudutPandang) {
                document.getElementById('hasilPerhitungan').innerHTML = `
                    <div class="text-center text-red-500 py-12">
                        <div class="text-8xl mb-6">⚠️</div>
                        <p class="font-medium text-lg">Mohon lengkapi semua data yang diperlukan</p>
                        <p class="text-sm text-red-400 mt-2">Pastikan semua field telah diisi dengan benar</p>
                    </div>
                `;
                return;
            }

            const luasPandang = panjang * lebar;

            // Hitung NJOPR
            const njopr = hitungNJOPR(jenisReklame, luasPandang, ketinggian);
            
            // Hitung Nilai Strategis
            const nilaiStrategis = hitungNilaiStrategis(kelasLokasi, sudutPandang, ketinggian, luasPandang);
            
            // Hitung NSR dan Pajak
            const nsr = njopr + nilaiStrategis;
            const pajakReklame = nsr * 0.25;

            // Tampilkan hasil
            tampilkanHasilPermanen(luasPandang, njopr, nilaiStrategis, nsr, pajakReklame);
        }

        function hitungPajakInsidentil() {
            const jenisReklame = document.getElementById('jenisReklameInsidentil').value;
            const kelasLokasi = document.getElementById('kelasLokasiInsidentil').value;
            const jumlahReklame = parseInt(document.getElementById('jumlahReklame').value) || 0;
            const lamaPemasangan = parseInt(document.getElementById('lamaPemasangan').value) || 0;

            if (!jenisReklame || !kelasLokasi || jumlahReklame <= 0 || lamaPemasangan <= 0) {
                document.getElementById('hasilPerhitungan').innerHTML = `
                    <div class="text-center text-red-500 py-12">
                        <div class="text-8xl mb-6">⚠️</div>
                        <p class="font-medium text-lg">Mohon lengkapi semua data yang diperlukan</p>
                        <p class="text-sm text-red-400 mt-2">Pastikan semua field telah diisi dengan benar</p>
                    </div>
                `;
                return;
            }

            let njopr = 0;
            let nsrl = 0;
            let luasPandang = 0;
            let jumlahLembar = 0;

            if (jenisReklame === 'baliho') {
                const panjang = parseFloat(document.getElementById('panjangInsidentil').value) || 0;
                const lebar = parseFloat(document.getElementById('lebarInsidentil').value) || 0;

                if (panjang <= 0 || lebar <= 0) {
                    document.getElementById('hasilPerhitungan').innerHTML = `
                        <div class="text-center text-red-500 py-12">
                            <div class="text-8xl mb-6">⚠️</div>
                            <p class="font-medium text-lg">Mohon isi dimensi reklame</p>
                            <p class="text-sm text-red-400 mt-2">Panjang dan lebar harus diisi</p>
                        </div>
                    `;
                    return;
                }

                luasPandang = panjang * lebar;
                
                // NJOPR = Luas × NJOP per m² × Lama Pemasangan
                njopr = luasPandang * 6250 * lamaPemasangan;
                
                // NSRL = Luas × Nilai Strategis × Lama Pemasangan
                const nilaiStrategisPerM2 = kelasLokasi === '1' ? 6250 : 5000;
                nsrl = luasPandang * nilaiStrategisPerM2 * lamaPemasangan;

            } else if (jenisReklame === 'selebaran') {
                jumlahLembar = parseInt(document.getElementById('jumlahLembar').value) || 0;

                if (jumlahLembar <= 0) {
                    document.getElementById('hasilPerhitungan').innerHTML = `
                        <div class="text-center text-red-500 py-12">
                            <div class="text-8xl mb-6">⚠️</div>
                            <p class="font-medium text-lg">Mohon isi jumlah lembar</p>
                            <p class="text-sm text-red-400 mt-2">Jumlah lembar harus diisi</p>
                        </div>
                    `;
                    return;
                }

                // NJOPR = Jumlah Lembar × NJOP per lembar × Lama Pemasangan
                njopr = jumlahLembar * 200 * lamaPemasangan;
                
                // NSRL = Jumlah Lembar × Nilai Strategis × Lama Pemasangan
                const nilaiStrategisPerLembar = kelasLokasi === '1' ? 6250 : 5000;
                nsrl = jumlahLembar * nilaiStrategisPerLembar * lamaPemasangan;
            }

            // NSR = NJOPR + NSRL
            const nsr = njopr + nsrl;
            
            // Pajak per unit = NSR × 25%
            const pajakPerUnit = nsr * 0.25;
            
            // Total pajak = Pajak per unit × Jumlah reklame
            const totalPajak = pajakPerUnit * jumlahReklame;

            // Tampilkan hasil
            tampilkanHasilInsidentil(jenisReklame, luasPandang, jumlahLembar, njopr, nsrl, nsr, pajakPerUnit, jumlahReklame, totalPajak, lamaPemasangan, kelasLokasi);
        }

        function hitungNJOPR(jenisReklame, luasPandang, ketinggian) {
            let tarifLuas = 0;
            let tarifKetinggian = 0;

            // Tentukan tarif berdasarkan jenis dan luas
            if (jenisReklame === 'megatron') {
                if (luasPandang <= 1) tarifLuas = 1500000;
                else if (luasPandang <= 5) tarifLuas = 2500000;
                else if (luasPandang <= 25) tarifLuas = 3000000;
                else tarifLuas = 3500000;
                tarifKetinggian = 200000;
            } else if (jenisReklame === 'billboard-tiang-penerangan') {
                if (luasPandang <= 1) tarifLuas = 312500;
                else if (luasPandang <= 5) tarifLuas = 625000;
                else if (luasPandang <= 25) tarifLuas = 937500;
                else tarifLuas = 1250000;
                tarifKetinggian = 100000;
            } else if (jenisReklame === 'billboard-tiang-tanpa') {
                if (luasPandang <= 1) tarifLuas = 187500;
                else if (luasPandang <= 5) tarifLuas = 437500;
                else if (luasPandang <= 25) tarifLuas = 750000;
                else tarifLuas = 1000000;
                tarifKetinggian = 100000;
            } else if (jenisReklame === 'billboard-menempel-penerangan') {
                if (luasPandang <= 1) tarifLuas = 125000;
                else if (luasPandang <= 5) tarifLuas = 250000;
                else if (luasPandang <= 25) tarifLuas = 625000;
                else tarifLuas = 875000;
                tarifKetinggian = 100000;
            } else if (jenisReklame === 'billboard-menempel-tanpa') {
                if (luasPandang <= 1) tarifLuas = 62500;
                else if (luasPandang <= 5) tarifLuas = 125000;
                else if (luasPandang <= 25) tarifLuas = 375000;
                else tarifLuas = 625000;
                tarifKetinggian = 100000;
            }

            return (luasPandang * tarifLuas) + (ketinggian * tarifKetinggian);
        }

        function hitungNilaiStrategis(kelasLokasi, sudutPandang, ketinggian, luasPandang) {
            // Bobot Lokasi (50%)
            let bobotLokasi = 0;
            if (kelasLokasi === '1') bobotLokasi = 10 * 0.5;
            else if (kelasLokasi === '2') bobotLokasi = 7 * 0.5;

            // Bobot Sudut Pandang (25%)
            let bobotSudut = 0;
            if (sudutPandang === 'lebih-4') bobotSudut = 10 * 0.25;
            else if (sudutPandang === '4') bobotSudut = 8 * 0.25;
            else if (sudutPandang === '3') bobotSudut = 6 * 0.25;
            else if (sudutPandang === '2') bobotSudut = 4 * 0.25;
            else if (sudutPandang === '1') bobotSudut = 2 * 0.25;

            // Bobot Ketinggian (25%)
            let bobotKetinggian = 0;
            if (ketinggian > 15) bobotKetinggian = 10 * 0.25;
            else if (ketinggian >= 10) bobotKetinggian = 8 * 0.25;
            else if (ketinggian >= 6) bobotKetinggian = 6 * 0.25;
            else if (ketinggian >= 3) bobotKetinggian = 4 * 0.25;
            else bobotKetinggian = 2 * 0.25;

            // Nilai Satuan Strategis
            let nilaiSatuan = 0;
            if (luasPandang > 40) nilaiSatuan = 3125000;
            else if (luasPandang > 20) nilaiSatuan = 1562500;
            else if (luasPandang > 10) nilaiSatuan = 625000;
            else if (luasPandang > 3) nilaiSatuan = 312500;
            else if (luasPandang > 1) nilaiSatuan = 125500;
            else nilaiSatuan = 62500;

            const totalBobot = bobotLokasi + bobotSudut + bobotKetinggian;
            return totalBobot * nilaiSatuan;
        }

        function tampilkanHasilPermanen(luasPandang, njopr, nilaiStrategis, nsr, pajakReklame) {
            // Ambil data untuk rincian
            const jenisReklame = document.getElementById('jenisReklame').value;
            const ketinggian = parseFloat(document.getElementById('ketinggian').value);
            const kelasLokasi = document.getElementById('kelasLokasiPermanen').value;
            const sudutPandang = document.getElementById('sudutPandang').value;

            // Hitung rincian NJOPR
            const rincianNJOPR = getRincianNJOPR(jenisReklame, luasPandang, ketinggian);
            
            // Hitung rincian Nilai Strategis
            const rincianStrategis = getRincianStrategis(kelasLokasi, sudutPandang, ketinggian, luasPandang);

            document.getElementById('hasilPerhitungan').innerHTML = `
                <div class="space-y-4">
                    <div class="bg-indigo-100 p-4 rounded-lg border-2 border-indigo-300">
                        <h3 class="font-bold text-indigo-800 text-center">🏢 REKLAME PERMANEN</h3>
                    </div>

                    <!-- Luas Pandang -->
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <div class="flex justify-between items-center">
                            <span class="font-medium text-gray-700">📐 Luas Pandang</span>
                            <span class="font-semibold text-gray-900">${luasPandang.toFixed(2)} m²</span>
                        </div>
                    </div>

                    <!-- NJOPR Detail -->
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-blue-800 mb-3">🏷️ Nilai Jual Objek Pajak Reklame (NJOPR)</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>Luas Pandang: ${luasPandang.toFixed(2)} m² × Rp ${rincianNJOPR.tarifLuas.toLocaleString('id-ID')}</span>
                                <span class="font-medium">Rp ${rincianNJOPR.nilaiLuas.toLocaleString('id-ID')}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Ketinggian: ${ketinggian} m × Rp ${rincianNJOPR.tarifKetinggian.toLocaleString('id-ID')}</span>
                                <span class="font-medium">Rp ${rincianNJOPR.nilaiKetinggian.toLocaleString('id-ID')}</span>
                            </div>
                            <hr class="border-blue-200">
                            <div class="flex justify-between font-semibold text-blue-900">
                                <span>Total NJOPR</span>
                                <span>Rp ${njopr.toLocaleString('id-ID')}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Nilai Strategis Detail -->
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-green-800 mb-3">📍 Nilai Strategis Reklame</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>Lokasi Kelas ${kelasLokasi} (50%): ${rincianStrategis.skorLokasi} × 0.5</span>
                                <span class="font-medium">${rincianStrategis.bobotLokasi.toFixed(1)}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Sudut Pandang ${rincianStrategis.labelSudut} (25%): ${rincianStrategis.skorSudut} × 0.25</span>
                                <span class="font-medium">${rincianStrategis.bobotSudut.toFixed(2)}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Ketinggian ${ketinggian}m (25%): ${rincianStrategis.skorKetinggian} × 0.25</span>
                                <span class="font-medium">${rincianStrategis.bobotKetinggian.toFixed(2)}</span>
                            </div>
                            <hr class="border-green-200">
                            <div class="flex justify-between">
                                <span>Total Bobot: ${rincianStrategis.totalBobot.toFixed(2)} × Rp ${rincianStrategis.nilaiSatuan.toLocaleString('id-ID')}</span>
                                <span class="font-semibold text-green-900">Rp ${nilaiStrategis.toLocaleString('id-ID')}</span>
                            </div>
                        </div>
                    </div>

                    <!-- NSR -->
                    <div class="bg-yellow-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-yellow-800 mb-3">💰 Nilai Sewa Reklame (NSR)</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>NJOPR</span>
                                <span>Rp ${njopr.toLocaleString('id-ID')}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Nilai Strategis</span>
                                <span>Rp ${nilaiStrategis.toLocaleString('id-ID')}</span>
                            </div>
                            <hr class="border-yellow-200">
                            <div class="flex justify-between font-semibold text-yellow-900">
                                <span>Total NSR</span>
                                <span>Rp ${nsr.toLocaleString('id-ID')}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Pajak Reklame -->
                    <div class="bg-red-50 p-4 rounded-lg border-2 border-red-200">
                        <h4 class="font-bold text-red-800 mb-3">🧾 Pajak Reklame</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>NSR × Tarif Pajak (25%)</span>
                                <span>Rp ${nsr.toLocaleString('id-ID')} × 25%</span>
                            </div>
                            <hr class="border-red-200">
                            <div class="flex justify-between">
                                <span class="font-bold text-red-700 text-lg">PAJAK REKLAME PER TAHUN</span>
                                <span class="font-bold text-red-900 text-xl">Rp ${pajakReklame.toLocaleString('id-ID')}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function tampilkanHasilInsidentil(jenisReklame, luasPandang, jumlahLembar, njopr, nsrl, nsr, pajakPerUnit, jumlahReklame, totalPajak, lamaPemasangan, kelasLokasi) {
            const jenisLabel = jenisReklame === 'baliho' ? 'Baliho/Kain/Spanduk/dll' : 'Selebaran/Brosur/Leaflet';
            const nilaiStrategisPerSatuan = kelasLokasi === '1' ? 6250 : 5000;
            
            let rincianNJOPR = '';
            let rincianNSRL = '';
            let satuanLabel = '';
            
            if (jenisReklame === 'baliho') {
                satuanLabel = `${luasPandang.toFixed(2)} m²`;
                rincianNJOPR = `${luasPandang.toFixed(2)} m² × Rp 6.250 × ${lamaPemasangan} hari = Rp ${njopr.toLocaleString('id-ID')}`;
                rincianNSRL = `${luasPandang.toFixed(2)} m² × Rp ${nilaiStrategisPerSatuan.toLocaleString('id-ID')} × ${lamaPemasangan} hari = Rp ${nsrl.toLocaleString('id-ID')}`;
            } else {
                satuanLabel = `${jumlahLembar} lembar`;
                rincianNJOPR = `${jumlahLembar} lembar × Rp 200 × ${lamaPemasangan} hari = Rp ${njopr.toLocaleString('id-ID')}`;
                rincianNSRL = `${jumlahLembar} lembar × Rp ${nilaiStrategisPerSatuan.toLocaleString('id-ID')} × ${lamaPemasangan} hari = Rp ${nsrl.toLocaleString('id-ID')}`;
            }

            document.getElementById('hasilPerhitungan').innerHTML = `
                <div class="space-y-4">
                    <div class="bg-purple-100 p-4 rounded-lg border-2 border-purple-300">
                        <h3 class="font-bold text-purple-800 text-center">📅 REKLAME INSIDENTIL</h3>
                        <p class="text-center text-purple-700 text-sm mt-1">${jenisLabel}</p>
                    </div>

                    <!-- Info Dasar -->
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-gray-800 mb-2">📋 Informasi Dasar</h4>
                        <div class="space-y-1 text-sm">
                            <div class="flex justify-between">
                                <span>Ukuran/Jumlah:</span>
                                <span class="font-medium">${satuanLabel}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Lama Pemasangan:</span>
                                <span class="font-medium">${lamaPemasangan} hari</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Kelas Lokasi:</span>
                                <span class="font-medium">Kelas ${kelasLokasi}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Jumlah Reklame:</span>
                                <span class="font-medium">${jumlahReklame} unit</span>
                            </div>
                        </div>
                    </div>

                    <!-- NJOPR Detail -->
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-blue-800 mb-3">🏷️ Nilai Jual Objek Pajak Reklame (NJOPR)</h4>
                        <div class="space-y-2 text-sm">
                            <div class="text-blue-700">${rincianNJOPR}</div>
                            <hr class="border-blue-200">
                            <div class="flex justify-between font-semibold text-blue-900">
                                <span>Total NJOPR</span>
                                <span>Rp ${njopr.toLocaleString('id-ID')}</span>
                            </div>
                        </div>
                    </div>

                    <!-- NSRL Detail -->
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-green-800 mb-3">📍 Nilai Strategis Reklame Lokasi (NSRL)</h4>
                        <div class="space-y-2 text-sm">
                            <div class="text-green-700">${rincianNSRL}</div>
                            <hr class="border-green-200">
                            <div class="flex justify-between font-semibold text-green-900">
                                <span>Total NSRL</span>
                                <span>Rp ${nsrl.toLocaleString('id-ID')}</span>
                            </div>
                        </div>
                    </div>

                    <!-- NSR -->
                    <div class="bg-yellow-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-yellow-800 mb-3">💰 Nilai Sewa Reklame (NSR)</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>NJOPR</span>
                                <span>Rp ${njopr.toLocaleString('id-ID')}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>NSRL</span>
                                <span>Rp ${nsrl.toLocaleString('id-ID')}</span>
                            </div>
                            <hr class="border-yellow-200">
                            <div class="flex justify-between font-semibold text-yellow-900">
                                <span>Total NSR</span>
                                <span>Rp ${nsr.toLocaleString('id-ID')}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Pajak Per Unit -->
                    <div class="bg-orange-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-orange-800 mb-3">🧮 Pajak Per Unit Reklame</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>NSR × Tarif Pajak (25%)</span>
                                <span>Rp ${nsr.toLocaleString('id-ID')} × 25%</span>
                            </div>
                            <hr class="border-orange-200">
                            <div class="flex justify-between font-semibold text-orange-900">
                                <span>Pajak Per Unit</span>
                                <span>Rp ${pajakPerUnit.toLocaleString('id-ID')}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Total Pajak -->
                    <div class="bg-red-50 p-4 rounded-lg border-2 border-red-200">
                        <h4 class="font-bold text-red-800 mb-3">🧾 Total Pajak Reklame</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>Pajak Per Unit × Jumlah Reklame</span>
                                <span>Rp ${pajakPerUnit.toLocaleString('id-ID')} × ${jumlahReklame}</span>
                            </div>
                            <hr class="border-red-200">
                            <div class="flex justify-between">
                                <span class="font-bold text-red-700 text-lg">TOTAL PAJAK REKLAME</span>
                                <span class="font-bold text-red-900 text-xl">Rp ${totalPajak.toLocaleString('id-ID')}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function getRincianNJOPR(jenisReklame, luasPandang, ketinggian) {
            let tarifLuas = 0;
            let tarifKetinggian = 0;

            if (jenisReklame === 'megatron') {
                if (luasPandang <= 1) tarifLuas = 1500000;
                else if (luasPandang <= 5) tarifLuas = 2500000;
                else if (luasPandang <= 25) tarifLuas = 3000000;
                else tarifLuas = 3500000;
                tarifKetinggian = 200000;
            } else if (jenisReklame === 'billboard-tiang-penerangan') {
                if (luasPandang <= 1) tarifLuas = 312500;
                else if (luasPandang <= 5) tarifLuas = 625000;
                else if (luasPandang <= 25) tarifLuas = 937500;
                else tarifLuas = 1250000;
                tarifKetinggian = 100000;
            } else if (jenisReklame === 'billboard-tiang-tanpa') {
                if (luasPandang <= 1) tarifLuas = 187500;
                else if (luasPandang <= 5) tarifLuas = 437500;
                else if (luasPandang <= 25) tarifLuas = 750000;
                else tarifLuas = 1000000;
                tarifKetinggian = 100000;
            } else if (jenisReklame === 'billboard-menempel-penerangan') {
                if (luasPandang <= 1) tarifLuas = 125000;
                else if (luasPandang <= 5) tarifLuas = 250000;
                else if (luasPandang <= 25) tarifLuas = 625000;
                else tarifLuas = 875000;
                tarifKetinggian = 100000;
            } else if (jenisReklame === 'billboard-menempel-tanpa') {
                if (luasPandang <= 1) tarifLuas = 62500;
                else if (luasPandang <= 5) tarifLuas = 125000;
                else if (luasPandang <= 25) tarifLuas = 375000;
                else tarifLuas = 625000;
                tarifKetinggian = 100000;
            }

            return {
                tarifLuas: tarifLuas,
                tarifKetinggian: tarifKetinggian,
                nilaiLuas: luasPandang * tarifLuas,
                nilaiKetinggian: ketinggian * tarifKetinggian
            };
        }

        function getRincianStrategis(kelasLokasi, sudutPandang, ketinggian, luasPandang) {
            // Skor dan bobot lokasi
            let skorLokasi = 0;
            if (kelasLokasi === '1') skorLokasi = 10;
            else if (kelasLokasi === '2') skorLokasi = 7;
            const bobotLokasi = skorLokasi * 0.5;

            // Skor dan bobot sudut pandang
            let skorSudut = 0;
            let labelSudut = '';
            if (sudutPandang === 'lebih-4') { skorSudut = 10; labelSudut = '>4 Arah'; }
            else if (sudutPandang === '4') { skorSudut = 8; labelSudut = '4 Arah'; }
            else if (sudutPandang === '3') { skorSudut = 6; labelSudut = '3 Arah'; }
            else if (sudutPandang === '2') { skorSudut = 4; labelSudut = '2 Arah'; }
            else if (sudutPandang === '1') { skorSudut = 2; labelSudut = '1 Arah'; }
            const bobotSudut = skorSudut * 0.25;

            // Skor dan bobot ketinggian
            let skorKetinggian = 0;
            if (ketinggian > 15) skorKetinggian = 10;
            else if (ketinggian >= 10) skorKetinggian = 8;
            else if (ketinggian >= 6) skorKetinggian = 6;
            else if (ketinggian >= 3) skorKetinggian = 4;
            else skorKetinggian = 2;
            const bobotKetinggian = skorKetinggian * 0.25;

            // Nilai satuan strategis
            let nilaiSatuan = 0;
            if (luasPandang > 40) nilaiSatuan = 3125000;
            else if (luasPandang > 20) nilaiSatuan = 1562500;
            else if (luasPandang > 10) nilaiSatuan = 625000;
            else if (luasPandang > 3) nilaiSatuan = 312500;
            else if (luasPandang > 1) nilaiSatuan = 125500;
            else nilaiSatuan = 62500;

            const totalBobot = bobotLokasi + bobotSudut + bobotKetinggian;

            return {
                skorLokasi, bobotLokasi,
                skorSudut, bobotSudut, labelSudut,
                skorKetinggian, bobotKetinggian,
                nilaiSatuan, totalBobot
            };
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97534260822f8bc9',t:'MTc1NjIxMDU3NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
